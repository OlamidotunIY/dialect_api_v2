model Stream {
    id          String    @id @default(auto()) @map("_id") @db.ObjectId
    name        String
    description String?
    workspaceId String    @db.ObjectId
    updatedAt   DateTime? @default(now())

    // Relations
    workspace     Workspace       @relation(fields: [workspaceId], references: [id])
    streamMembers streamMembers[]
    projects      Project[]
    Teams         Team[]
    Activity      Activity[]
    channel       channel[]

    // Constraints
    @@unique([workspaceId, name]) // Ensure name is unique within a workspace
    // Indexes
    @@index([workspaceId])
}

model streamMembers {
    id                String  @id @default(auto()) @map("_id") @db.ObjectId
    workspaceMemberId String  @db.ObjectId
    streamId          String  @db.ObjectId
    teamId            String? @db.ObjectId

    // Relations
    User           WorkspaceMember  @relation(fields: [workspaceMemberId], references: [id])
    stream         Stream           @relation(fields: [streamId], references: [id])
    Team           Team?            @relation(fields: [teamId], references: [id])
    channelMembers channelMembers[]

    // Indexes
    @@index([workspaceMemberId])
    @@index([streamId])
    @@index([teamId])
}
