model Stream {
    id          String  @id @default(auto()) @map("_id") @db.ObjectId
    name        String
    description String?
    workspaceId String  @db.ObjectId
    updatedAt   DateTime @default(now())

    // Relations
    workspace     Workspace       @relation(fields: [workspaceId], references: [id])
    streamMembers streamMembers[]
    projects      Project[]
    Teams         Team[]
    Activity      Activity[]

    // Constraints
    @@unique([workspaceId, name]) // Ensure name is unique within a workspace
    // Indexes
    @@index([workspaceId])
}

model streamMembers {
    id       String  @id @default(auto()) @map("_id") @db.ObjectId
    userId   String  @db.ObjectId
    streamId String  @db.ObjectId
    teamId   String? @db.ObjectId

    // Relations
    user   User   @relation(fields: [userId], references: [id])
    stream Stream @relation(fields: [streamId], references: [id])
    Team   Team?  @relation(fields: [teamId], references: [id])

    // Indexes
    @@index([userId])
    @@index([streamId])
    @@index([teamId])
}
