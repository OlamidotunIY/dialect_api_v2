model Workspace {
    id                     String           @id @default(auto()) @map("_id") @db.ObjectId
    name                   String
    description            String?
    ownerId                String           @db.ObjectId
    teamSize               Int?
    defaultStreamId        Int?
    inviteLink             String?          @unique
    inviteLinkActive       Boolean          @default(false)
    logo                   String?
    subscriptionPlan       SubscriptionPlan @default(FREE)
    subscriptionExpiryDate DateTime?
    aiEnabled              Boolean          @default(false)
    stripeCustomerId       String?
    stripeSubscriptionId   String?
    subscriptiontrialEnd   DateTime?
    createdAt              DateTime         @default(now())
    updatedAt              DateTime         @updatedAt

    // Relations
    owner   User              @relation("OwnedWorkspaces", fields: [ownerId], references: [id])
    members WorkspaceMember[] // Implicit many-to-many relation via WorkspaceMember
    streams Stream[]
    roles   Role[]

    // Indexes
    @@index([ownerId])
}

model WorkspaceMember {
    id          String @id @default(auto()) @map("_id") @db.ObjectId
    userId      String @db.ObjectId
    workspaceId String @db.ObjectId
    roleId      String @db.ObjectId
    status      String @default("pending")

    // Relations
    user      User      @relation(fields: [userId], references: [id])
    workspace Workspace @relation(fields: [workspaceId], references: [id])
    role      Role      @relation(fields: [roleId], references: [id])

    // Indexes
    @@index([userId])
    @@index([workspaceId])
    @@index([roleId])
}